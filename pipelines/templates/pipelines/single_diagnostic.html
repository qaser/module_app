{% extends "module_app/base.html" %}
{% block title %}–û–±–∑–æ—Ä –í–¢–î{% endblock %}
{% block app_name %}–ú–∞–≥–∏—Å—Ç—Ä–∞–ª—å–Ω—ã–µ –≥–∞–∑–æ–ø—Ä–æ–≤–æ–¥—ã{% endblock %}

{% load static %}


{% block style %}
    <link rel="stylesheet" href="{% static 'css/pages/single-diagnostic.css'%}">
{% endblock %}

{% block sidepanel %}
    <a href="{% url 'pipelines:index' %}" class="sidebar__item">
        <div class="sidebar__icon sidebar__icon_objects"></div>
        <h3 class="sidebar__text">–°—Ö–µ–º–∞ –º–∞–≥–∏—Å—Ç—Ä–∞–ª—å–Ω—ã—Ö –≥–∞–∑–æ–ø—Ä–æ–≤–æ–¥–æ–≤</h3>
    </a>
    <a href="{% url 'pipelines:repairs' %}" class="sidebar__item">
        <div class="sidebar__icon sidebar__icon_service"></div>
        <h3 class="sidebar__text">–û–±–∑–æ—Ä —Ä–µ–º–æ–Ω—Ç–æ–≤</h3>
    </a>
    <a href="{% url 'pipelines:diagnostics' %}" class="sidebar__item">
        <div class="sidebar__icon sidebar__icon_edit"></div>
        <h3 class="sidebar__text">–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ú–ì</h3>
    </a>
    <a href="{% url 'pipelines:plans' %}" class="sidebar__item">
        <div class="sidebar__icon sidebar__icon_index"></div>
        <h3 class="sidebar__text">–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
    </a>
    <!-- <a href="" class="sidebar__item">
        <div class="sidebar__icon sidebar__icon_help"></div>
        <h3 class="sidebar__text">–°–ø—Ä–∞–≤–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
    </a> -->
{% endblock %}

{% block content %}
    {% csrf_token %}
    <main class="content">
        <section class="main" id="main">
            <h1 class="main__title">–í–¢–î<span id="diagnostic_num"></span></h1>
            <div class="card card_inline" id="{{ diagnostic_id }}">
            <div class="card__container">
                <div class="card__header module-color__header_{{ request.resolver_match.app_name }}">
                    <h3 class="card__title">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                </div>

                <div class="card__field" id="diagnostic_info">
                    <div class="card__line">
                        <p class="card__param">–ú–∞–≥–∏—Å—Ç—Ä–∞–ª—å–Ω—ã–π –≥–∞–∑–æ–ø—Ä–æ–≤–æ–¥</p>
                        <p class="card__value" id="pipeline"></p>
                    </div>
                    <div class="card__line">
                        <p class="card__param">–£—á–∞—Å—Ç–æ–∫ –ú–ì</p>
                        <p class="card__value" id="length"></p>
                    </div>
                    <div class="card__line">
                        <p class="card__param">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –í–¢–î</p>
                        <p class="card__value" id="start_date"></p>
                    </div>
                    <div class="card__line">
                        <p class="card__param">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –í–¢–î</p>
                        <p class="card__value" id="end_date"></p>
                    </div>
                    <div class="card__line">
                        <p style="cursor: pointer;" class="card__param link" id="tubes_link_btn">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä—É–±–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ üîó</p>
                        <p class="card__value_unique" id="tube_count"></p>
                    </div>
                    <div class="card__line">
                        <p style="cursor: pointer;" class="card__param link" id="tube_units_link_btn">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ–±—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ üîó</p>
                        <p class="card__value_unique" id="unit_count"></p>
                    </div>
                    <div class="card__line">
                        <p style="cursor: pointer;" class="card__param link" id="bends_link_btn">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–≤–æ–¥–æ–≤ üîó</p>
                        <p class="card__value_unique" id="bend_count"></p>
                    </div>
                    <div class="card__line">
                        <p style="cursor: pointer;" class="card__param link" id="anomaly_link_btn">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–Ω–æ–º–∞–ª–∏–π üîó</p>
                        <p class="card__value_unique" id="anomaly_count"></p>
                    </div>
                    <div class="card__line">
                        <p style="cursor: pointer;" class="card__param link" id="defects_link_btn">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ—Ñ–µ–∫—Ç–æ–≤ üîó</p>
                        <p class="card__value_unique" id="defects_count"></p>
                    </div>
                </div>
            </div>

            <div class="card__container">
                <div class="card__header module-color__header_{{ request.resolver_match.app_name }}" id="card_files">
                    <h3 class="card__title">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</h3>
                    <button class="button card__button card__button_add hidden" data-tooltip="–î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª"></button>
                </div>
                <div class="card__line" id="empty_files">
                    <p class="card__param">–§–∞–π–ª—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</p>
                </div>
                <div class="card__files"></div>
            </div>
            </div>
        </section>
    </main>

    <!-- –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ —Å —Ñ–æ—Ä–º–æ–π –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞ -->
    <div class="popup" id="popup-file">
        <div class="popup__container">
            <button class="popup__button-close" type="button"></button>
            <form class="form-popup form-popup_wide" name="new-file" id="form-newfile" enctype="multipart/form-data">
                <h2 class="form-popup__header"></h2>
                <label class="form-popup__field">
                    <input class="form-popup__input" id="file-name" name="name" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞" required maxlength="50" minlength="4"></input>
                    <span class="form-popup__input-error" id="file-name-error"></span>
                </label>
                <label class="form-popup__file-field">
                    <span class="form-popup__file-title">–§–∞–π–ª:</span>
                    <input class="form-popup__input module-color__button_pipelines" type="file" id="pipe-files" name="files" accept="image/*, application/pdf" required>
                    <span class="form-popup__input-error" id="pipe-files-error"></span>
                </label>
                <progress id="progressBar" value="0" max="100"></progress>
                <div class="form-popup__container">
                    <span class="form-popup__status" id="uploadForm_Status"></span>
                    <span id="uploadForm_Size"></span>
                </div>
                <button class="form-popup__button button module-color__button_{{ request.resolver_match.app_name }}" type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </form>
        </div>
    </div>


    <template class="file-template">
        <div class="card__line" id="">
            <a class="card__value_ext  link" target="_blank" data-tooltip="–û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª"></a>
            <button class="card__delete hidden" type="button" data-tooltip="–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª">‚úñ</button>
        </div>
    </template>

{% endblock %}

{% block script %}
    <script type="module" src="{% static 'js/apps/pipelines/singleDiagnostic.js' %}"></script>
{% endblock %}
